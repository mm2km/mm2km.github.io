<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="description" content="Scenes Data Preview">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Scenes Data Preview</title>

  <!-- Bulma for basic layout & button styles -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css">
  <!-- Font for the section title -->
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700;800&display=swap" rel="stylesheet">

  <style>
    /* Section title */
    .avqa-title {
      font-family: 'Montserrat', 'Arial', sans-serif;
      font-weight: 900;
      font-size: 2.0rem;
      letter-spacing: -0.5px;
      color: #222222;
      margin-bottom: 18px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      text-align: center;
    }

    /* Small note text under the title */
    .table-note {
      text-align: center;
      margin: 0 auto 25px;
      max-width: 800px;
    }

    /* Tooltip style for Self-Collected button */
    .scene-switcher .button.self-collected {
      position: relative;
    }

    .scene-switcher .button.self-collected::after {
      content: "We use standard ISO 7046 to denote the models of the screw, which looks like “m4*10”";
      position: absolute;
      bottom: calc(100% + 8px);
      left: 50%;
      transform: translateX(-50%);
      background: #363636;
      color: #fff;
      font-size: 12px;
      padding: 6px 8px;
      border-radius: 6px;
      white-space: nowrap;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.2s, transform 0.2s;
      z-index: 10;
    }

    .scene-switcher .button.self-collected::before {
      content: "";
      position: absolute;
      bottom: 100%;
      left: 50%;
      transform: translateX(-50%);
      border: 6px solid transparent;
      border-top-color: #363636;
      opacity: 0;
      transition: opacity 0.2s;
      z-index: 10;
    }

    .scene-switcher .button.self-collected:hover::after,
    .scene-switcher .button.self-collected:hover::before {
      opacity: 1;
      transform: translateX(-50%) translateY(0);
    }

    /* Layout for the scene preview block */
    .scene-container {
      width: 960px;
      margin: 0 auto;
    }

    .scene-switcher {
      display: flex;
      width: 100%;
      border-radius: 10px 10px 0 0;
      overflow: visible;
      background: #f0f0f0;
    }

    .scene-switcher .button {
      position: relative;
      flex: 1;
      font-weight: 600;
      border-radius: 0;
      border: none;
      box-shadow: none;
      margin: 0;
      padding: 12px 0;
      font-size: 15px;
      color: #555;
      background: #f0f0f0;
      transition: all 0.25s ease;
      cursor: pointer;
    }

    .scene-switcher .button:hover {
      background: #e0e0e0;
      color: #000;
    }

    .scene-switcher .button.is-active {
      background: #363636;
      color: #fff;
      font-weight: 700;
    }

    .scene-frame {
      width: 960px;
      height: 680px;
      border: 1.5px solid #bbb;
      border-top: none;
      border-radius: 0 0 10px 10px;
      background: #fafafa;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
    }

    .scene-frame img {
      width: 100%;
      height: 100%;
      object-fit: contain;
    }

    /* Helper tooltip on inactive buttons: "Click to switch scenes" */
    .scene-switcher .button:not(.is-active)::after {
      content: "Click to switch scenes";
      position: absolute;
      left: 50%;
      top: calc(100% + 10px);
      transform: translateX(-50%) translateY(4px);
      background: #363636;
      color: #fff;
      font-size: 8px;
      line-height: 1;
      padding: 6px 8px;
      border-radius: 6px;
      white-space: nowrap;
      pointer-events: none;
      opacity: 0;
      transition: opacity .18s ease, transform .18s ease;
      z-index: 2;
    }

    .scene-switcher .button:not(.is-active)::before {
      content: "";
      position: absolute;
      left: 50%;
      top: 100%;
      transform: translateX(-50%);
      border: 6px solid transparent;
      border-top-color: #363636;
      opacity: 0;
      transition: opacity .18s ease;
      z-index: 2;
    }

    .scene-switcher .button:not(.is-active):hover::after,
    .scene-switcher .button:not(.is-active):hover::before {
      opacity: 1;
      transform: translateX(-50%) translateY(0);
    }

    /* Center the block horizontally on the page */
    .scene-row {
      width: 1200px;
      max-width: 100%;
      margin: 0 auto;
      display: flex;
      gap: 24px;
      align-items: flex-start;
      justify-content: center;
    }

    .scene-row .scene-container {
      margin: 0;
      flex: 1 1 0;
      width: auto;
    }

    .scene-row .scene-switcher {
      width: 100%;
    }

    .scene-row .scene-frame {
      width: 100%;
      height: 420px;
    }

    @media (max-width: 1100px) {
      .scene-row {
        flex-direction: column;
      }
      .scene-row .scene-frame {
        height: 480px;
      }
    }
  </style>
</head>

<body>
  <section class="section" style="margin-bottom: -1rem;">
    <div class="is-centered has-text-centered">
      <div class="scene-row">
        <div class="scene-container scene-gallery">
          <div class="avqa-title">Scenes Data Preview</div>
          <div class="table-note">
            <img
              src="./static/images/click.png"
              alt="click logo"
              class="scene-logo"
              style="width: 18px; height: 18px; vertical-align: middle; display: inline-block;"
            >
            Click the <strong>scene name</strong> to switch the scene preview.<br>
          </div>

          <div class="scene-switcher">
            <button type="button" class="button" data-src="./static/images/D6_uco_3d_data.jpg">Tiny Tabletop</button>
            <button type="button" class="button" data-src="./static/images/D5_wildrgbd_data.jpg">Tabletop</button>
            <button type="button" class="button" data-src="./static/images/D7_our_collected.jpg">Self-Collected</button>
            <button type="button" class="button is-active" data-src="./static/images/D1_vsi_data.jpg">Indoor</button>
            <button type="button" class="button" data-src="./static/images/D2_DL3DV_indoor_data.jpg">Wild Indoor</button>
            <button type="button" class="button" data-src="./static/images/D3_DL3DV_outdoor_data.jpg">Outdoor</button>
            <button type="button" class="button" data-src="./static/images/D4_DL3DV_drone_data.jpg">Drone</button>
          </div>

          <div class="scene-frame">
            <img data-role="scene" src="" alt="Scene Preview" loading="eager" fetchpriority="high" decoding="async">
          </div>
        </div>
      </div>
    </div>
  </section>

  <script>
    (function () {
      function setupGallery(root) {
        const img = root.querySelector('img[data-role="scene"]');
        const btns = Array.from(root.querySelectorAll('.scene-switcher .button'));
        if (!img || btns.length === 0) return;

        function setActive(btn, opts = {}) {
          const src = btn.dataset.src;
          if (!src) return;

          // button active state
          btns.forEach(b => b.classList.toggle('is-active', b === btn));

          // image switching with simple fade
          if (img.getAttribute('src') !== src) {
            img.style.opacity = 0;
            const pre = new Image();
            pre.onload = () => {
              img.src = src;
              img.alt = btn.textContent.trim() || img.alt;
              (img.decode ? img.decode() : Promise.resolve())
                .catch(() => { })
                .finally(() => {
                  img.style.transition = 'opacity .2s ease';
                  img.style.opacity = 1;
                });
            };
            pre.src = src;
          } else {
            img.alt = btn.textContent.trim() || img.alt;
          }

          img.setAttribute('fetchpriority', opts.initial ? 'high' : 'auto');
        }

        btns.forEach((b, idx) => {
          b.addEventListener('click', () => setActive(b));
          b.addEventListener('mouseenter', () => {
            const s = b.dataset.src;
            if (s) {
              const i = new Image();
              i.src = s;
            }
          });
          b.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' || e.key === ' ') {
              e.preventDefault();
              setActive(b);
            }
            if (e.key === 'ArrowLeft' || e.key === 'ArrowRight') {
              e.preventDefault();
              const next = e.key === 'ArrowLeft'
                ? (idx - 1 + btns.length) % btns.length
                : (idx + 1) % btns.length;
              btns[next].focus();
            }
          });
        });

        const initBtn = root.querySelector('.scene-switcher .button.is-active') || btns[0];
        if (initBtn) setActive(initBtn, { initial: true });
      }

      document.querySelectorAll('.scene-gallery').forEach(setupGallery);
    })();

    // Add the tooltip class to the "Self-Collected" button
    document.querySelectorAll('.scene-switcher .button').forEach(btn => {
      if (btn.textContent.trim() === "Self-Collected") {
        btn.classList.add('self-collected');
      }
    });
  </script>
</body>
</html>
